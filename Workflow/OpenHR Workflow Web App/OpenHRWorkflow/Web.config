<?xml version="1.0"?>
<configuration>  
  <appSettings configSource="web.custom.config"/>
  <system.web>     
    <compilation debug="true" strict="true" explicit="true" targetFramework="4.0" />

     <authentication mode="Forms">
        <forms loginUrl="~/Account/Login.aspx" name="openhr.auth" defaultUrl="Home.aspx" timeout="262800"/>
     </authentication>
     
    <sessionState timeout="60" cookieless="true"/>

    <customErrors mode="RemoteOnly"/>
     
    <pages controlRenderingCompatibilityVersion="3.5" clientIDMode="AutoID"/>

     <!--Handler registration for II6-->
     <httpHandlers>
        <add verb="GET" path="Image.ashx" type="OpenHRWorkflow.ImageHandler, OpenHRWorkflow"/>
     </httpHandlers>
  </system.web>
   
   <system.webServer>      
      <modules runAllManagedModulesForAllRequests="true"/>

      <!--Handler registration for II7+-->
      <handlers>
         <add verb="GET" path="Image.ashx" name="ImageHandler" type="OpenHRWorkflow.ImageHandler, OpenHRWorkflow"/>
      </handlers>
      <!--Tunn off config validation as it will fail on the II6 httpHandler registration section in system.web-->
      <validation validateIntegratedModeConfiguration="false" />
      
      <!--TODO what we doing about server caching?-->
      <staticContent>
         <clientCache cacheControlMode="UseMaxAge"  cacheControlMaxAge="30.00:00:00" />
      </staticContent>
   </system.webServer>
   
  <location path="FileUpload.aspx">
    <system.web>
      <httpRuntime maxRequestLength="2097151" requestLengthDiskThreshold="8192"/>
    </system.web>
  </location>
  <location path="Home.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
  <location path="PendingSteps.aspx">
    <system.web>
      <authorization>
        <deny users="?"/>
      </authorization>
    </system.web>
  </location>
</configuration>