(function (n) { var l = "keydown", d = "autoNumeric", r = !1, o = "0", c = "$1", a = "\\", t = "", u = "-", f = ".", e = null, g = "string", i = !0, b = "character"; function ht(n) { var t = {}, i; return n.selectionStart === undefined ? (n.focus(), i = document.selection.createRange(), t.length = i.text.length, i.moveStart(b, -n.value.length), t.end = i.text.length, t.start = t.end - t.length) : (t.start = n.selectionStart, t.end = n.selectionEnd, t.length = t.end - t.start), t } function st(n, t, r) { if (n.selectionStart === undefined) { n.focus(); var u = n.createTextRange(); u.collapse(i), u.moveEnd(b, r), u.moveStart(b, t), u.select() } else n.selectionStart = t, n.selectionEnd = r } function ct(t, i) { n.each(i, function (r, u) { var o = "function", f, s; typeof u == o ? i[r] = u(t, i, r) : typeof u == g && (f = u.substr(0, 4), f === "fun:" ? (s = n.autoNumeric[u.substr(4)], i[r] = typeof s == o ? n.autoNumeric[u.substr(4)](t, i, r) : e) : f === "css:" && (i[r] = n(u.substr(4)).val())) }) } function k(n, t) { typeof n[t] == g && (n[t] *= 1) } function y(i, r) { var o = n.extend({}, n.fn.autoNumeric.defaults, r), c, l, s, h; return n.metadata && (o = n.extend(o, i.metadata())), ct(i, o), c = o.vMax.toString().split(f), l = !o.vMin && o.vMin !== 0 ? [] : o.vMin.toString().split(f), k(o, "vMax"), k(o, "vMin"), k(o, "mDec"), o.aNeg = o.vMin < 0 ? u : t, typeof o.mDec != "number" && (o.mDec = Math.max((c[1] ? c[1] : t).length, (l[1] ? l[1] : t).length)), o.altDec === e && o.mDec > 0 && (o.aDec === f && o.aSep !== "," ? o.altDec = "," : o.aDec === "," && o.aSep !== f && (o.altDec = f)), s = o.aNeg ? "([-\\" + o.aNeg + "]?)" : "(-?)", o._aNegReg = s, o._skipFirst = new RegExp(s + "[^-" + (o.aNeg ? a + o.aNeg : t) + a + o.aDec + "\\d].*?(\\d|\\" + o.aDec + "\\d)"), o._skipLast = new RegExp("(\\d\\" + o.aDec + "?)[^\\" + o.aDec + "\\d]\\D*$"), h = (o.aNeg ? o.aNeg : u) + o.aNum + a + o.aDec, o.altDec && o.altDec !== o.aSep && (h += o.altDec), o._allowed = new RegExp("[^" + h + "]", "gi"), o._numReg = new RegExp(s + "(?:\\" + o.aDec + "?(\\d+\\" + o.aDec + "\\d+)|(\\d*(?:\\" + o.aDec + "\\d*)?))"), o } function s(n, i, r) { var u, f; if (i.aSign) while (n.indexOf(i.aSign) > -1) n = n.replace(i.aSign, t); return n = n.replace(i._skipFirst, "$1$2"), n = n.replace(i._skipLast, c), n = n.replace(i._allowed, t), i.altDec && (n = n.replace(i.altDec, i.aDec)), u = n.match(i._numReg), n = u ? [u[1], u[2], u[3]].join(t) : t, r && (f = "^" + i._aNegReg + "0*(\\d" + (r === "leading" ? ")" : "|$)"), f = new RegExp(f), n = n.replace(f, "$1$2")), n } function ft(n, t, i) { if (t && i) { var r = n.split(t); r[1] && r[1].length > i && (i > 0 ? (r[1] = r[1].substring(0, i), n = r.join(t)) : n = r[0]) } return n } function nt(n, t, i) { return t && t !== f && (n = n.replace(t, f)), i && i !== u && (n = n.replace(i, u)), n.match(/\d/) || (n += o), n } function ut(n, t, i) { return i && i !== u && (n = n.replace(u, i)), t && t !== f && (n = n.replace(f, t)), n } function w(n, t) { n = s(n, t), n = ft(n, t.aDec, t.mDec), n = nt(n, t.aDec, t.aNeg); var i = +n; return i >= t.vMin && i <= t.vMax } function v(n, i, r) { return n === t || n === i.aNeg ? i.wEmpty === "zero" ? n + o : i.wEmpty === "sign" || r ? n + i.aSign : n : e } function it(n, r) { var h, o, u, f, l; if (n = s(n, r), h = v(n, r, i), h !== e) return h; if (o = t, o = r.dGroup === 2 ? /(\d)((\d)(\d{2}?)+)$/ : r.dGroup === 4 ? /(\d)((\d{4}?)+)$/ : /(\d)((\d{3}?)+)$/, u = n.split(r.aDec), r.altDec && u.length === 1 && (u = n.split(r.altDec)), f = u[0], r.aSep) while (o.test(f)) f = f.replace(o, c + r.aSep + "$2"); return r.mDec !== 0 && u.length > 1 ? (u[1].length > r.mDec && (u[1] = u[1].substring(0, r.mDec)), n = f + r.aDec + u[1]) : n = f, r.aSign && (l = n.indexOf(r.aNeg) !== -1, n = n.replace(r.aNeg, t), n = r.pSign === "p" ? r.aSign + n : n + r.aSign, l && (n = r.aNeg + n)), n } function tt(n, i, r, s) { var d; n = n === t ? o : n.toString(); var a = t, v = 0, h = t, p = typeof s == "boolean" || s === e ? s ? i : 0 : +s, g = function (n) { var i = p === 0 ? /(\.[1-9]*)0*$/ : p === 1 ? /(\.\d[1-9]*)0*$/ : new RegExp("(\\.\\d{" + p + "}[1-9]*)0*$"); return n = n.replace(i, c), p === 0 && (n = n.replace(/\.$/, t)), n }; n.charAt(0) === u && (h = u, n = n.replace(u, t)), n.match(/^\d/) || (n = o + n), h === u && +n == 0 && (h = t), +n > 0 && (n = n.replace(/^0*(\d)/, c)); var k = n.lastIndexOf(f), tt = k === -1 ? n.length - 1 : k, w = n.length - 1 - tt; if (w <= i) { if (a = n, w < p) for (k === -1 && (a += f); w < p; ) d = "000000".substring(0, p - w), a += d, w += d.length; else w > p ? a = g(a) : w === 0 && p === 0 && (a = a.replace(/\.$/, t)); return h + a } var b = k + i, l = +n.charAt(b + 1), y = n.substring(0, b + 1).split(t), nt = n.charAt(b) === f ? n.charAt(b - 1) % 2 : n.charAt(b) % 2; if (l > 4 && r === "S" || l > 4 && r === "A" && h === t || l > 5 && r === "A" && h === u || l > 5 && r === "s" || l > 5 && r === "a" && h === t || l > 4 && r === "a" && h === u || l > 5 && r === "B" || l === 5 && r === "B" && nt === 1 || l > 0 && r === "C" && h === t || l > 0 && r === "F" && h === u || l > 0 && r === "U") for (v = y.length - 1; v >= 0; v -= 1) if (y[v] !== f) if (y[v] = +y[v] + 1, y[v] < 10) break; else v > 0 && (y[v] = o); return y = y.slice(0, b + 1), a = g(y.join(t)), h + a } function et(t, i) { var u = this; u.options = i, u.that = t, u.$that = n(t), u.formatted = r, u.io = y(u.$that, u.options), u.value = t.value } function yt(n) { var t = n.data(d); return t || (t = {}, n.data(d, t)), t } function h(n, t) { var r = yt(n), i = r.holder; return i === undefined && t && (i = new et(n.get(0), t), r.holder = i), i } function rt(n) { var t = n.data(d); return t && t.holder ? t.holder.options : {} } function ot(t) { t = t || {}; var i = n(this), r = h(i, t); r.io.aForm && (this.value || r.io.wEmpty !== "empty") && i.autoNumericSet(i.autoNumericGet(t), t) } function wt(t) { var f = n(t.target), u = h(f); return (u.init(t), u.skipAllways(t)) ? (u.processed = i, i) : u.processAllways() ? (u.processed = i, u.formatQuick(), t.preventDefault(), r) : (u.formatted = r, i) } function lt(t) { var e = n(t.target), u = h(e), f = u.processed; if (u.init(t), u.skipAllways(t)) return i; if (f) return t.preventDefault(), r; if (u.processAllways() || u.processKeypress()) return u.formatQuick(), t.preventDefault(), r; u.formatted = r } function at(r) { var e = n(r.target), u = h(e), f; if ((u.init(r), f = u.skipAllways(r), u.kdCode = 0, delete u.valuePartsBeforePaste, f) || this.value === t) return i; u.formatted || u.formatQuick() } function pt(t) { var f = n(t.target), u = h(f), r; u.inVal = f.val(), r = v(u.inVal, u.io, i), r !== e && f.val(r) } function vt(i) { var c = n(i.target), l = h(c), f = l.io, u = c.val(), a = u, o; u !== t && (u = s(u, f), v(u, f) === e && w(u, f) ? (u = nt(u, f.aDec, f.aNeg), u = tt(u, f.mDec, f.mRound, f.aPad), u = ut(u, f.aDec, f.aNeg)) : u = t), o = v(u, f, r), o === e && (o = it(u, f)), o !== a && c.val(o), o !== l.inVal && (c.change(), delete l.inVal) } function p(t) { return typeof t == g && (t = t.replace(/\[/g, "\\[").replace(/\]/g, "\\]"), t = "#" + t.replace(/(:|\.)/g, "\\$1")), n(t) } et.prototype = { init: function (n) { var t = this; t.value = t.that.value, t.io = y(t.$that, t.options), t.cmdKey = n.metaKey, t.shiftKey = n.shiftKey, t.selection = ht(t.that), (n.type === l || n.type === "keyup") && (t.kdCode = n.keyCode), t.which = n.which, t.processed = r, t.formatted = r }, setSelection: function (n, t, i) { n = Math.max(n, 0), t = Math.min(t, this.that.value.length), this.selection = { start: n, end: t, length: t - n }, (i === undefined || i) && st(this.that, n, t) }, setPosition: function (n, t) { this.setSelection(n, n, t) }, getBeforeAfter: function () { var n = this.value, i = n.substring(0, this.selection.start), t = n.substring(this.selection.end, n.length); return [i, t] }, getBeforeAfterStriped: function () { var n = this.getBeforeAfter(); return n[0] = s(n[0], this.io), n[1] = s(n[1], this.io), n }, normalizeParts: function (n, r) { var u = this.io, h, f, e; return r = s(r, u), h = r.match(/^\d/) ? i : "leading", n = s(n, u, h), (n === t || n === u.aNeg) && r > t && (r = r.replace(/^0*(\d)/, c)), f = n + r, u.aDec && (e = f.match(new RegExp("^" + u._aNegReg + a + u.aDec)), e && (n = n.replace(e[1], e[1] + o), f = n + r)), u.wEmpty === "zero" && (f === u.aNeg || f === t) && (n += o), [n, r] }, setValueParts: function (n, u) { var e = this, s = e.io, h = e.normalizeParts(n, u), f = h.join(t), o = h[0].length; return w(f, s) ? (f = ft(f, s.aDec, s.mDec), o > f.length && (o = f.length), e.value = f, e.setPosition(o, r), i) : r }, signPosition: function () { var t = this.io, u = t.aSign, r = this.that, n, f, i; return u ? (n = u.length, t.pSign === "p" ? (f = t.aNeg && r.value && r.value.charAt(0) === t.aNeg, f ? [1, n + 1] : [0, n]) : (i = r.value.length, [i - n, i])) : [1e3, -1] }, expandSelectionOnSign: function (n) { var r = this, i = r.signPosition(), t = r.selection; t.start < i[1] && t.end > i[0] && ((t.start < i[0] || t.end > i[1]) && r.value.substring(Math.max(t.start, i[0]), Math.min(t.end, i[1])).match(/^\s*$/) ? t.start < i[0] ? r.setSelection(t.start, i[0], n) : r.setSelection(i[1], t.end, n) : r.setSelection(Math.min(t.start, i[0]), Math.max(t.end, i[1]), n)) }, checkPaste: function () { var n = this; if (n.valuePartsBeforePaste !== undefined) { var i = n.getBeforeAfter(), u = n.valuePartsBeforePaste; delete n.valuePartsBeforePaste, i[0] = i[0].substr(0, u[0].length) + s(i[0].substr(u[0].length), n.io), n.setValueParts(i[0], i[1]) || (n.value = u.join(t), n.setPosition(u[0].length, r)) } }, skipAllways: function (n) { var s = "keypress", u = this, t = u.kdCode, h = u.which, o = u.cmdKey; if (t === 17 && n.type === "keyup" && u.valuePartsBeforePaste !== undefined) return u.checkPaste(), r; if (t >= 112 && t <= 123 || t >= 91 && t <= 93 || t >= 9 && t <= 31 || t < 8 && (h === 0 || h === t) || t === 144 || t === 145 || t === 45 || o && t === 65) return i; if (o && (t === 67 || t === 86 || t === 88)) return n.type === l && u.expandSelectionOnSign(), t === 86 && (n.type === l || n.type === s ? u.valuePartsBeforePaste === undefined && (u.valuePartsBeforePaste = u.getBeforeAfter()) : u.checkPaste()), n.type === l || n.type === s || t === 67; if (o) return i; if (t === 37 || t === 39) { var e = u.io.aSep, f = u.selection.start, c = u.that.value; return n.type === l && e && !u.shiftKey && (t === 37 && c.charAt(f - 2) === e ? u.setPosition(f - 1) : t === 39 && c.charAt(f) === e && u.setPosition(f + 1)), i } return t >= 34 && t <= 40 ? i : r }, processAllways: function () { var t = this, n; return t.kdCode === 8 || t.kdCode === 46 ? (t.selection.length ? (t.expandSelectionOnSign(r), n = t.getBeforeAfterStriped(), t.setValueParts(n[0], n[1])) : (n = t.getBeforeAfterStriped(), t.kdCode === 8 ? n[0] = n[0].substring(0, n[0].length - 1) : n[1] = n[1].substring(1, n[1].length), t.setValueParts(n[0], n[1])), i) : r }, processKeypress: function () { var h = this, n = h.io, s = String.fromCharCode(h.which), c = h.getBeforeAfterStriped(), e = c[0], r = c[1]; return s === n.aDec || n.altDec && s === n.altDec || (s === f || s === ",") && h.kdCode === 110 ? !n.mDec || !n.aDec ? i : n.aNeg && r.indexOf(n.aNeg) > -1 ? i : e.indexOf(n.aDec) > -1 ? i : r.indexOf(n.aDec) > 0 ? i : (r.indexOf(n.aDec) === 0 && (r = r.substr(1)), h.setValueParts(e + n.aDec, r), i) : s === u || s === "+" ? n.aNeg ? (e === t && r.indexOf(n.aNeg) > -1 && (e = n.aNeg, r = r.substring(1, r.length)), e = e.charAt(0) === n.aNeg ? e.substring(1, e.length) : s === u ? n.aNeg + e : e, h.setValueParts(e, r), i) : i : s >= o && s <= "9" ? (n.aNeg && e === t && r.indexOf(n.aNeg) > -1 && (e = n.aNeg, r = r.substring(1, r.length)), h.setValueParts(e + s, r), i) : i }, formatQuick: function () { var n = this, r = n.io, l = n.getBeforeAfterStriped(), f = it(n.value, n.io), s = f.length, o, e, c, h; if (f) { for (o = l[0].split(t), e = 0; e < o.length; e += 1) o[e].match("\\d") || (o[e] = a + o[e]); c = new RegExp("^.*?" + o.join(".*?")), h = f.match(c), h ? (s = h[0].length, (s === 0 && f.charAt(0) !== r.aNeg || s === 1 && f.charAt(0) === r.aNeg) && r.aSign && r.pSign === "p" && (s = n.io.aSign.length + (f.charAt(0) === u ? 1 : 0))) : r.aSign && r.pSign === "s" && (s -= r.aSign.length) } n.that.value = f, n.setPosition(s), n.formatted = i } }, n.fn.autoNumeric = function (n) { return this.each(function () { ot.call(this, n) }).unbind(".autoNumeric").bind({ "keydown.autoNumeric": wt, "keypress.autoNumeric": lt, "keyup.autoNumeric": at, "focusin.autoNumeric": pt, "focusout.autoNumeric": vt }) }, n.autoNumeric = {}, n.autoNumeric.Strip = function (t) { var f = p(t), u = rt(f), r, i; return arguments[1] && typeof arguments[1] == "object" && (u = n.extend({}, u, arguments[1])), r = y(f, u), i = p(t).val(), i = s(i, r), i = nt(i, r.aDec, r.aNeg), +i == 0 && (i = o), i }, n.autoNumeric.Format = function (i, r) { var e = p(i), f = rt(e), u; return arguments[2] && typeof arguments[2] == "object" && (f = n.extend({}, f, arguments[2])), r.toString(), u = y(e, f), r = tt(r, u.mDec, u.mRound, u.aPad), r = ut(r, u.aDec, u.aNeg), w(r, u) || (r = tt(t, u.mDec, u.mRound, u.aPad)), it(r, u) }, n.fn.autoNumericGet = function () { return arguments[0] ? n.autoNumeric.Strip(this, arguments[0]) : n.autoNumeric.Strip(this) }, n.fn.autoNumericSet = function (t) { var i = this; return arguments[1] ? i.val(n.autoNumeric.Format(i, t, arguments[1])) : i.val(n.fn.autoNumeric.Format(i, t)) }, n.autoNumeric.defaults = { aNum: "0123456789", aSep: ",", dGroup: "3", aDec: f, altDec: e, aSign: t, pSign: "p", vMax: "999999999.99", vMin: "0.00", mDec: e, mRound: "S", aPad: i, wEmpty: "empty", aForm: r }, n.fn.autoNumeric.defaults = n.autoNumeric.defaults, n.fn.autoNumeric.Strip = n.autoNumeric.Strip, n.fn.autoNumeric.Format = n.autoNumeric.Format })(jQuery);